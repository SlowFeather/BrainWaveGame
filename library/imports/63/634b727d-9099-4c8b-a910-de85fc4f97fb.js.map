{"version":3,"sources":["assets\\scripts\\UI\\ShowResultUI\\ShowResultUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { StorageDef } from \"../../Def/StorageDef\";\nimport { UIDef } from \"../../Def/UIDef\";\nimport DriveManager from \"../../Manager/DriveManager/DriveManager\";\nimport SoundManager from \"../../Manager/SoundManager\";\nimport UserManager from \"../../Manager/UserManager/UserManager\";\nimport StorageUtil from \"../../Tools/StorageUtil\";\nimport UIUtil from \"../../Tools/UIUtil\";\nimport LoadingUI from \"../LoadingUI/LoadingUI\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class ShowResultUI extends cc.Component {\n\n    //所有的奖杯物体\n    @property([cc.Node])\n    allTrophy: cc.Node[] = [];\n\n    @property(cc.Label)\n    jihuoLab:cc.Label;\n\n    @property(cc.Label)\n    zhuanzhuLab:cc.Label;\n\n\n    jihuoxingzuoshuliangTxt:string=\"激 活 星 座 数 量：\";\n    xunlianjinduTxt:string=\"训 练 完 成 进 度：\";\n\n\n    onLoad(){\n        this.allTrophy.forEach(element => {\n            element.active=false;\n        });\n    }\n\n    onEnable(){\n\n        console.log(\"-->进入结果页面\");\n\n        //再次确认关闭http\n        DriveManager.Instance.StopPingDrive();\n\n        console.log(\"CurrentStarNumber:\"+UserManager.Instance.CurrentStarNumber);\n        console.log(\"CurrentConstellationNumber:\"+UserManager.Instance.CurrentConstellationNumber);\n\n        if (UserManager.Instance.CurrentStarNumber>85) {\n            UserManager.Instance.CurrentConstellationNumber=5;\n        }\n\n        \n        // let score=StorageUtil.getData(StorageDef.StarLight,0);\n        //当前点亮的星座数量\n        let score=UserManager.Instance.CurrentConstellationNumber;\n\n\n        for (let index = 0; index < this.allTrophy.length; index++) {\n            let element = this.allTrophy[index] as cc.Node;\n            element.active=true;\n            element.opacity=50;\n\n        }\n        //判断当前得分，得几分就得几个奖杯\n        for (let index = 0; index < this.allTrophy.length; index++) {\n            let element = this.allTrophy[index] as cc.Node;\n            if (index<score) {\n                // element.active=true;\n                element.opacity=255;\n            }\n        }\n\n\n        //计算出专注度得分\n        UserManager.Instance.CurrentAbsorbedScore=Math.round(((UserManager.Instance.CurrentStarNumber+UserManager.Instance.CurrentConstellationNumber)/90)*100);\n        if (UserManager.Instance.CurrentAbsorbedScore>=100) {\n            UserManager.Instance.CurrentAbsorbedScore=100;\n        }\n        \n        //这里修改专注度和激活星座数量\n        //this.jihuoLab.string=\"激 活 星 座 数 量：\"+score.toString()+\" 个\";\n\n        //最后星座比例\n        let proportion:number=0;\n        //最后得分 星座比例+得分 保留一位小数\n        let numberofactive:string=\"0\";\n        \n        switch (UserManager.Instance.CurrentConstellationNumber) {\n            case 0:\n                //第一颗星星是18\n                proportion=UserManager.Instance.CurrentStarNumber/18;\n                numberofactive=(UserManager.Instance.CurrentConstellationNumber+proportion).toFixed(1);\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+UserManager.Instance.CurrentAbsorbedScore.toString()+\"%\";\n                break;\n            case 1:\n                //第二颗星星是19\n                proportion=(UserManager.Instance.CurrentStarNumber-18)/19;\n                numberofactive=(UserManager.Instance.CurrentConstellationNumber+proportion).toFixed(1);\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+UserManager.Instance.CurrentAbsorbedScore.toString()+\"%\";\n                break;\n            case 2:\n                //第三颗星星是19\n                proportion=(UserManager.Instance.CurrentStarNumber-18-19)/19;\n                numberofactive=(UserManager.Instance.CurrentConstellationNumber+proportion).toFixed(1);\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+UserManager.Instance.CurrentAbsorbedScore.toString()+\"%\";\n                break;\n            case 3:\n                //第四颗星星是18\n                proportion=(UserManager.Instance.CurrentStarNumber-18-19-19)/18;\n                numberofactive=(UserManager.Instance.CurrentConstellationNumber+proportion).toFixed(1);\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+UserManager.Instance.CurrentAbsorbedScore.toString()+\"%\";\n                break;\n            case 4:\n                //第五颗星星是12\n                proportion=(UserManager.Instance.CurrentStarNumber-18-19-19-18)/12;\n                numberofactive=(UserManager.Instance.CurrentConstellationNumber+proportion).toFixed(1);\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+UserManager.Instance.CurrentAbsorbedScore.toString()+\"%\";\n                break;\n            case 5:\n                //第五颗星星是0\n                proportion=0;\n                numberofactive=\"5\";\n                this.jihuoLab.string=this.jihuoxingzuoshuliangTxt+numberofactive+\" 个\";\n                this.zhuanzhuLab.string=this.xunlianjinduTxt+\"100\"+\"%\";\n                break;\n            default:\n                break;\n        }\n        // if (UserManager.Instance.CurrentConstellationNumber==0) {\n            \n        //     this.jihuoLab.string=\"激 活 星 座 数 量：\"+score.toString()+\" 个\";\n        //     this.zhuanzhuLab.string=\"专 注 度 得 分：\"+score.toString()+\" 分\";\n        // }\n        // if (score==1) {\n            \n        // }\n        \n    }\n    onDisable(){\n        this.allTrophy.forEach(element => {\n            element.active=false;\n        });\n    }\n    start () {\n        \n    }\n    OnShowResultBtnClick(){\n        SoundManager.playEffect(2);\n        UIUtil.ShowUI(UIDef.ProcessingUI,()=>{\n            console.dir(UserManager.Instance.PostResultModel);\n\n            UserManager.Instance.SendResult(this.SendCallBack); \n        });\n        \n\n// parent.closeIFrame();\n    }\n\n    SendCallBack(ended,response){\n        // console.dir(response.data);\n        if (ended) {\n            console.log(\"跳转界面\");\n            \n            //window.location.href=UserManager.Instance.JumpUrl;\n            window.location.href=\"https://www.baidu.com/\"+response.data;\n        }else{\n            console.log(\"上传失败\");\n            alert(\"上传失败，请重新上传\");\n\n        }\n        UIUtil.HideUI(UIDef.ProcessingUI);\n    }\n\n\n\n    OnReStartBtnClick(){  \n        SoundManager.playEffect(2);\n\n        UIUtil.ShowUI(UIDef.StartUI,()=>{\n            UIUtil.HideUI(UIDef.ShowResultUI);\n        });\n    }\n    \n    // update (dt) {}\n}\n"]}