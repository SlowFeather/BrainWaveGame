{"version":3,"sources":["assets\\scripts\\Tools\\HTTPUtil.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["export class HttpUtil {\n\n    // private static UrlHead: string = \"http://127.0.0.1:1111/\";\n    /**\n     * 延迟多久没回复就放弃\n     *\n     * @type {number}\n     * @memberof DriveManager\n     */\n    private static TimeOut:number=200;\n\n    /**\n     * GET请求\n     *\n     * @static\n     * @param {*} url\n     * @param {object} [params={}]\n     * @param {*} callback\n     * @memberof HttpUtil\n     */\n    public static GET(url, params: object = {}, callback) {\n        let dataStr = '';\n        Object.keys(params).forEach(key => {\n            dataStr += key + '=' + encodeURIComponent(params[key]) + '&';\n        })\n        if (dataStr !== '') {\n            dataStr = dataStr.substr(0, dataStr.lastIndexOf('&'));\n            url = url + '?' + dataStr;\n        }\n        // url = HttpUtil.baseUrl + url;\n        try {\n            let xhr = cc.loader.getXMLHttpRequest();\n            xhr.open(\"GET\", url, true);\n            xhr.setRequestHeader(\"Content-Type\", \"text/plain;charset=UTF-8\");\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    let response = xhr.responseText;\n                    if (xhr.status >= 200 && xhr.status < 300) {\n                        let httpStatus = xhr.statusText;\n                        // callback(true, JSON.parse(response));\n                        callback(true, response);\n                    } else {\n                        callback(false, response);\n                    }\n                }\n            };\n            xhr.timeout = this.TimeOut;\n            xhr.send();\n        } catch (error) {\n            console.log(\"Get-->\"+error);\n        }\n        \n    }\n    \n    /**\n     * POST请求\n     *\n     * @static\n     * @param {*} url\n     * @param {object} [param={}]\n     * @param {*} callback\n     * @memberof HttpUtil\n     */\n    public static POST(url, param: object = {}, callback) {\n        // url = HttpUtil.baseUrl + url;\n        var xhr = cc.loader.getXMLHttpRequest();\n        let dataStr = '';\n        Object.keys(param).forEach(key => {\n            dataStr += key + '=' + encodeURIComponent(param[key]) + '&';\n        })\n        if (dataStr !== '') {\n            dataStr = dataStr.substr(0, dataStr.lastIndexOf('&'));\n        }\n        try {\n            xhr.open(\"POST\", url, true);\n            xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    let response = xhr.responseText;\n                    if (xhr.status >= 200 && xhr.status < 300) {\n                        let httpStatus = xhr.statusText;\n                        // callback(true, JSON.parse(response));\n                        callback(true, response);\n                    } else {\n                        callback(false, response);\n                    }\n                }\n            };\n            xhr.send(dataStr);\n        } catch (error) {\n            console.log(\"Post-->\"+error);\n        }\n        \n    }\n}"]}