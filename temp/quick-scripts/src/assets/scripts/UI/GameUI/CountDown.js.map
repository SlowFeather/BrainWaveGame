{"version":3,"sources":["assets\\scripts\\UI\\GameUI\\CountDown.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAC;AAG1C;IAAuC,6BAAY;IADnD;QAAA,qEAgIC;QApHG;;;;;WAKG;QACH,YAAM,GAAS,IAAI,CAAC;QA2EpB,WAAK,GAAQ,CAAC,CAAC;;IAmCnB,CAAC;IAlGG,0BAAM,GAAN;IAEA,CAAC;IAED,yBAAK,GAAL;IAEA,CAAC;IACD,cAAc;IAEd,IAAI;IACJ,eAAe;IAEf,IAAI;IAEJ;;;;OAIG;IACH,kCAAc,GAAd,UAAe,QAAiB;QAC5B,KAAK;QACL,IAAI,CAAC,UAAU,GAAC,CAAC,CAAC;QAClB,IAAI,CAAC,UAAU,GAAC,EAAE,CAAC;QACnB,qBAAqB;QACrB,qBAAqB;QACrB,IAAI,CAAC,MAAM,GAAC,KAAK,CAAC;QAClB,IAAI,CAAC,cAAc,GAAC,QAAQ,CAAC;IACjC,CAAC;IAGD;;;;OAIG;IACH,qCAAiB,GAAjB;QAEI,IAAI,CAAC,MAAM,GAAC,KAAK,CAAC;IACtB,CAAC;IAGD;;;;OAIG;IACH,iCAAa,GAAb;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;SACpB;IACL,CAAC;IAED;;;;OAIG;IACH,oCAAgB,GAAhB;QACI,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;QACb,IAAI,CAAC,cAAc,GAAC,IAAI,CAAC;IAC7B,CAAC;IAID,0BAAM,GAAN,UAAQ,EAAE;QACN,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,OAAO;SACV;QACD,IAAI,CAAC,KAAK,IAAE,EAAE,CAAC;QACf,IAAI,IAAI,CAAC,KAAK,IAAE,CAAC,EAAE;YACf,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;YACb,sBAAsB;YACtB,wEAAwE;YACxE,OAAO;YACP,IAAI,CAAC,UAAU,IAAE,CAAC,CAAC;YACnB,IAAI,IAAI,CAAC,UAAU,GAAC,CAAC,EAAE;gBACnB,IAAI,CAAC,UAAU,IAAE,CAAC,CAAC;gBACnB,IAAI,IAAI,CAAC,UAAU,GAAC,CAAC,EAAE;oBACnB,sBAAsB;oBACtB,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;oBACjB,IAAI,IAAI,CAAC,cAAc,EAAE;wBACrB,IAAI,CAAC,cAAc,EAAE,CAAC;qBACzB;oBACD,OAAO;iBACV;gBACD,IAAI,CAAC,UAAU,GAAC,EAAE,CAAC;aACtB;SAEJ;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,MAAM,IAAE,CAAC,EAAE;YACtC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAC,IAAI,GAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;SACtF;aAAI;YACD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;SACrF;IACL,CAAC;IAzHD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACD;IAJD,SAAS;QAD7B,OAAO;OACa,SAAS,CA+H7B;IAAD,gBAAC;CA/HD,AA+HC,CA/HsC,EAAE,CAAC,SAAS,GA+HlD;kBA/HoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import { MessageDef } from \"../../Def/MessageDef\";\nimport MessageDispatcher from \"../../Manager/MessageDispatcher/MessageDispatcher\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class CountDown extends cc.Component {\n\n\n    @property(cc.Label)\n    timeLab: cc.Label;\n\n\n    timeMinute:number;\n\n    timeSecond:number;\n\n    /**\n     * 计时器是否停止\n     *\n     * @type {Boolean}\n     * @memberof CountDown\n     */\n    stoped:Boolean=true;\n\n\n    /**\n     * 计时结束方法\n     *\n     * @type {Function}\n     * @memberof CountDown\n     */\n    ClockOverEvent:Function;\n    \n\n    onLoad(){\n\n    }\n\n    start () {\n        \n    }\n    // onEnable(){\n        \n    // }\n    // onDisable(){\n\n    // }\n\n    /**\n     * 开始计时器\n     *\n     * @memberof CountDown\n     */\n    StartCountDown(callback:Function){\n        //3分钟\n        this.timeMinute=0;\n        this.timeSecond=50;\n        // this.timeMinute=3;\n        // this.timeSecond=0;\n        this.stoped=false;\n        this.ClockOverEvent=callback;\n    }\n\n\n    /**\n     * 继续计时器\n     *\n     * @memberof CountDown\n     */\n    ContinueCountDown(){\n\n        this.stoped=false;\n    }\n\n\n    /**\n     * 停止计时器\n     *\n     * @memberof CountDown\n     */\n    StopCountDown(){\n        if (!this.stoped) {\n            this.stoped=true;\n        }\n    }\n    \n    /**\n     * 彻底释放计时器\n     *\n     * @memberof CountDown\n     */\n    ReleaseCountDown(){\n        this.stoped=true;\n        this.timer=0;\n        this.ClockOverEvent=null;\n    }\n\n    timer:number=0;\n\n    update (dt) {\n        if (this.stoped) {\n            return;\n        }\n        this.timer+=dt;\n        if (this.timer>=1) {\n            this.timer=0;\n            //console.log(\"过了一秒\");\n            // MessageDispatcher.Instance.Dispatch(MessageDef.BrainGetValueMessage);\n            //取一次数据\n            this.timeSecond-=1;\n            if (this.timeSecond<0) {\n                this.timeMinute-=1;\n                if (this.timeMinute<0) {\n                    //console.log(\"计时结束\");\n                    this.stoped=true;\n                    if (this.ClockOverEvent) {\n                        this.ClockOverEvent();\n                    }\n                    return;\n                }\n                this.timeSecond=59;\n            }\n        \n        }\n        \n        if (this.timeSecond.toString().length==1) {\n            this.timeLab.string=\"0\"+this.timeMinute.toString()+\":0\"+this.timeSecond.toString();\n        }else{\n            this.timeLab.string=\"0\"+this.timeMinute.toString()+\":\"+this.timeSecond.toString();\n        }\n    }\n\n}"]}