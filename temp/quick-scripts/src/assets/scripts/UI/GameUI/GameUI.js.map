{"version":3,"sources":["assets\\scripts\\UI\\GameUI\\GameUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { MessageDef } from \"../../Def/MessageDef\";\nimport { UIDef } from \"../../Def/UIDef\";\nimport DriveManager from \"../../Manager/DriveManager/DriveManager\";\nimport MessageDispatcher from \"../../Manager/MessageDispatcher/MessageDispatcher\";\nimport SoundManager from \"../../Manager/SoundManager\";\nimport ResUtil from \"../../Tools/ResUtil\";\nimport UIUtil from \"../../Tools/UIUtil\";\nimport CountDown from \"./CountDown\";\nimport Dashboard from \"./Dashboard\";\nimport RadarChartBz from \"./RadarChartBz\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameUI extends cc.Component {\n\n    @property(CountDown)\n    countDown:CountDown;\n\n    @property(Dashboard)\n    dashboard:Dashboard;\n\n    @property(RadarChartBz)\n    radarChartBz:RadarChartBz;\n    \n    onEnable(){\n        this.countDown.StartCountDown(this.OnCountDownEndHandler);\n\n\n        //发送游戏开始消息\n        MessageDispatcher.Instance.Dispatch(MessageDef.BrainGameStart);\n\n        MessageDispatcher.Instance.AddEventListener(MessageDef.BrainBlockMessage,this.BrainBlockMessageHandler,this);\n        MessageDispatcher.Instance.AddEventListener(MessageDef.BrainNotConnectMessage,this.BrainNotConnectMessageHandler,this);\n\n        //开始访问设备\n        DriveManager.Instance.StartPinDrive();\n    }\n\n    onDisable(){\n        //发送游戏结束消息\n        MessageDispatcher.Instance.Dispatch(MessageDef.BrainGameEnd);\n\n\n        //释放计时器\n        this.countDown.ReleaseCountDown();\n        //停止访问设备\n        DriveManager.Instance.StopPingDrive();\n        // DriveManager.Instance.OnBrainValueChangeEvent=null;\n\n        \n        MessageDispatcher.Instance.RemoveEventListener(MessageDef.BrainBlockMessage,this.BrainBlockMessageHandler,this);\n        MessageDispatcher.Instance.RemoveEventListener(MessageDef.BrainNotConnectMessage,this.BrainNotConnectMessageHandler,this);\n\n        // DriveManager.Instance.OnBrainNotConnectEvent=null;\n    }\n\n    start () {\n        // console.log(\"-->进入GameUI start\");\n        \n    }\n    BrainNotConnectMessageHandler(){\n        if (this.countDown.stoped) {\n            \n        }else{\n            this.OnBlockBtnClick();\n        }\n    }\n    BrainBlockMessageHandler(){\n        this.OnBlockBtnClick();\n    }\n\n\n    OnCountDownEndHandler(){\n        console.log(\"--> 游戏结束\"+this.node.name);\n\n        UIUtil.ShowUI(UIDef.ShowResultUI,()=>{\n            UIUtil.HideUI(UIDef.GameUI);\n        })\n    }\n\n    OnBackBtnClick(){\n        console.log(\"--> 点击了回到主页面按钮\");\n        SoundManager.playEffect(2);\n\n        UIUtil.ShowUI(UIDef.StartUI,()=>{\n            UIUtil.HideUI(UIDef.GameUI);\n        });\n    }\n\n    OnBlockBtnClick(){\n        // console.log(\"--> 点击了断开连接按钮\");\n        this.countDown.StopCountDown();\n        UIUtil.ShowUI(UIDef.DisConnectUI);\n    }\n    OnConnectBtnClick(){\n        // console.log(\"--> 点击了恢复连接按钮\");\n        this.countDown.ContinueCountDown();\n        UIUtil.HideUI(UIDef.DisConnectUI);\n    }\n\n    onDestroy(){\n        \n    }\n    update (dt) {\n\n    }\n}\n"]}